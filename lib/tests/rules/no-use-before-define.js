// Generated by CoffeeScript 2.3.1
(function() {
  /**
   * @fileoverview Tests for no-use-before-define rule.
   * @author Ilya Volodin
   */
  'use strict';
  var RuleTester, rule, ruleTester;

  //------------------------------------------------------------------------------
  // Requirements
  //------------------------------------------------------------------------------
  rule = require('../../rules/no-use-before-define');

  ({RuleTester} = require('eslint'));

  //------------------------------------------------------------------------------
  // Tests
  //------------------------------------------------------------------------------
  ruleTester = new RuleTester({
    parser: '../../..'
  });

  ruleTester.run('no-use-before-define', rule, {
    valid: [
      'a = 10\nalert a',
      'b = (a) -> alert(a)',
      'Object.hasOwnProperty.call(a)',
      'a = -> alert(arguments)',
      'foo = (a = 1) ->',
      {
        code: 'b = -> a()\na = -> alert(arguments)',
        options: ['nofunc']
      },
      'do ->\n  a = 42\n  alert a',
      'a()\ntry\n  throw new Error()\ncatch a',
      'class A\nnew A()',
      'a = 0\nb = a',
      '{a = 0, b = a} = {}',
      '[a = 0, b = a] = {}',
      'foo = -> foo()',
      'a = null\nfor a of a\n  ;',
      'a = null\nfor a from a\n  ;',
      'a = null\nfor a in a\n  ;',
      'b for b in [0...1]',
      'b++ while b',
      'not b unless b',
      {
        // object style options
        code: 'b = -> a()\na = -> alert(arguments)',
        options: [
          {
            functions: false
          }
        ]
      },
      {
        code: 'foo = -> new A\nclass A',
        options: [
          {
            classes: false
          }
        ]
      },
      {
        // "variables" option
        code: 'foo = -> bar\nbar = null',
        options: [
          {
            variables: false
          }
        ]
      }
    ],
    invalid: [
      {
        code: 'a++\na = 19',
        errors: [
          {
            message: "'a' was used before it was defined.",
            type: 'Identifier'
          }
        ]
      },
      {
        code: 'a()\na = ->',
        errors: [
          {
            message: "'a' was used before it was defined.",
            type: 'Identifier'
          }
        ]
      },
      {
        code: 'alert a[1]\na = [1, 3]',
        errors: [
          {
            message: "'a' was used before it was defined.",
            type: 'Identifier'
          }
        ]
      },
      {
        code: 'a()\na = ->\n  alert b\n  b = 10\n  a()',
        errors: [
          {
            message: "'a' was used before it was defined.",
            type: 'Identifier'
          },
          {
            message: "'b' was used before it was defined.",
            type: 'Identifier'
          }
        ]
      },
      {
        code: 'a()\na = ->',
        options: ['nofunc'],
        errors: [
          {
            message: "'a' was used before it was defined.",
            type: 'Identifier'
          }
        ]
      },
      {
        code: 'a()\na = -> alert(arguments)',
        options: [
          {
            functions: false
          }
        ],
        errors: [
          {
            message: "'a' was used before it was defined.",
            type: 'Identifier'
          }
        ]
      },
      {
        code: 'do ->\n  alert a\n  a = 42',
        errors: [
          {
            message: "'a' was used before it was defined.",
            type: 'Identifier'
          }
        ]
      },
      {
        code: 'do => a()\na = ->',
        errors: [
          {
            message: "'a' was used before it was defined.",
            type: 'Identifier'
          }
        ]
      },
      {
        code: '(-> a())()\na = ->',
        errors: [
          {
            message: "'a' was used before it was defined.",
            type: 'Identifier'
          }
        ]
      },
      {
        code: 'a()\ntry\n  throw new Error()\ncatch foo\n  a = null',
        errors: [
          {
            message: "'a' was used before it was defined.",
            type: 'Identifier'
          }
        ]
      },
      {
        code: 'f = -> a\na = null',
        errors: [
          {
            message: "'a' was used before it was defined.",
            type: 'Identifier'
          }
        ]
      },
      {
        code: 'new A()\nclass A',
        errors: [
          {
            message: "'A' was used before it was defined.",
            type: 'Identifier'
          }
        ]
      },
      {
        code: 'foo = -> new A\nclass A',
        errors: [
          {
            message: "'A' was used before it was defined.",
            type: 'Identifier'
          }
        ]
      },
      {
        code: 'new A()\nA = class',
        errors: [
          {
            message: "'A' was used before it was defined.",
            type: 'Identifier'
          }
        ]
      },
      {
        code: 'foo = -> new A()\nA = class',
        errors: [
          {
            message: "'A' was used before it was defined.",
            type: 'Identifier'
          }
        ]
      },
      {
        code: 'switch foo\n  when 1\n    a()\n  else\n    a = null',
        errors: [
          {
            message: "'a' was used before it was defined.",
            type: 'Identifier'
          }
        ]
      },
      {
        code: 'if true\n  foo = -> a\n  a = null',
        errors: [
          {
            message: "'a' was used before it was defined.",
            type: 'Identifier'
          }
        ]
      },
      {
        // object style options
        code: 'a()\na = ->',
        options: [
          {
            functions: false,
            classes: false
          }
        ],
        errors: [
          {
            message: "'a' was used before it was defined.",
            type: 'Identifier'
          }
        ]
      },
      {
        code: 'new A()\nclass A',
        options: [
          {
            functions: false,
            classes: false
          }
        ],
        errors: [
          {
            message: "'A' was used before it was defined.",
            type: 'Identifier'
          }
        ]
      },
      {
        code: 'new A()\nA = class',
        options: [
          {
            classes: false
          }
        ],
        parserOptions: {
          ecmaVersion: 6
        },
        errors: [
          {
            message: "'A' was used before it was defined.",
            type: 'Identifier'
          }
        ]
      },
      {
        code: 'foo = -> new A()\nA = class',
        options: [
          {
            classes: false
          }
        ],
        errors: [
          {
            message: "'A' was used before it was defined.",
            type: 'Identifier'
          }
        ]
      },
      {
        // invalid initializers
        code: 'a = a',
        errors: [
          {
            message: "'a' was used before it was defined.",
            type: 'Identifier'
          }
        ]
      },
      {
        code: 'a = a + b',
        errors: [
          {
            message: "'a' was used before it was defined.",
            type: 'Identifier'
          }
        ]
      },
      {
        code: 'a = foo a',
        errors: [
          {
            message: "'a' was used before it was defined.",
            type: 'Identifier'
          }
        ]
      },
      {
        code: 'foo = (a = a) ->',
        errors: [
          {
            message: "'a' was used before it was defined.",
            type: 'Identifier'
          }
        ]
      },
      {
        code: '{a = a} = []',
        errors: [
          {
            message: "'a' was used before it was defined.",
            type: 'Identifier'
          }
        ]
      },
      {
        code: '[a = a] = []',
        errors: [
          {
            message: "'a' was used before it was defined.",
            type: 'Identifier'
          }
        ]
      },
      {
        code: '{b = a, a} = {}',
        errors: [
          {
            message: "'a' was used before it was defined.",
            type: 'Identifier'
          }
        ]
      },
      {
        code: '[b = a, a] = {}',
        errors: [
          {
            message: "'a' was used before it was defined.",
            type: 'Identifier'
          }
        ]
      },
      {
        code: '{a = 0} = a',
        errors: [
          {
            message: "'a' was used before it was defined.",
            type: 'Identifier'
          }
        ]
      },
      {
        code: '[a = 0] = a',
        errors: [
          {
            message: "'a' was used before it was defined.",
            type: 'Identifier'
          }
        ]
      },
      {
        // "variables" option
        code: 'foo = ->\n  bar\n  bar = 1\nbar',
        options: [
          {
            variables: false
          }
        ],
        errors: [
          {
            message: "'bar' was used before it was defined.",
            type: 'Identifier'
          }
        ]
      },
      {
        code: 'foo\nfoo = null',
        options: [
          {
            variables: false
          }
        ],
        errors: [
          {
            message: "'foo' was used before it was defined.",
            type: 'Identifier'
          }
        ]
      },
      {
        code: 'for x of xs\n  ;\nxs = []',
        errors: ["'xs' was used before it was defined."]
      },
      {
        code: 'for x from xs\n  ;\nxs = []',
        errors: ["'xs' was used before it was defined."]
      },
      {
        code: "try\ncatch {message = x}\n  ;\nx = ''",
        errors: ["'x' was used before it was defined."]
      }
    ]
  });

}).call(this);
